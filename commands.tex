\usepackage{xparse}

% MATH SHORT-HAND

\NewDocumentCommand{\link}{ s D(){i} D(){j} }{
    \IfBooleanTF{#1}
        {#2 \not\rightarrow #3}
        {#2     \rightarrow #3}
}

\NewDocumentCommand{\sub}{ d() D(){ij} }{ #1_{#2} }

% WRAPPERS

\NewDocumentCommand{\xfig}{ O{!htb} m }{
    \begin{figure}[#1]
        #2
    \end{figure}
}

\NewDocumentCommand{\xtab}{ O{!htb} m }{
    \begin{table}[#1]
        #2
    \end{table}
}

\NewDocumentCommand{\xeq}{ m }{
    \begin{equation}\label{eq:#1}
        \input{equations/#1}
    \end{equation}
}

\NewDocumentCommand{\xwrap}{ O{r} m O{0.5\textwidth} }{
    \begin{wrapfigure}{#1}{#3}
        #2
    \end{wrapfigure}
}

% CONTENT

\NewDocumentCommand{\ximg}{ O{width=\textwidth} D//{figures} m O{} }{
    \centering
    \includegraphics[#1]{#2/#3}
    \captionof{figure}{#4} 
    \label{#3}
}

\NewDocumentCommand{\xtex}{ O{table} D//{tables} m O{} }{
    \centering
    \input{#2/#3}
    \captionof{#1}{#4} 
    \label{#3}
}

\NewDocumentCommand{\xanim}{ O{width=\textwidth} D||{12} m O{} }{
    \centering
    \animategraphics[#1]{#2}{figures/#3}{}{}
    \captionof{animation}{#4}
    \label{#3}
}

% MULTIPLES

\NewDocumentCommand{\xdirow}{ m m }{
    \begin{minipage}[t]{.475\textwidth}
        #1
    \end{minipage}%
    \hfill%
    \begin{minipage}[t]{.475\textwidth}
        #2
    \end{minipage}
}

\NewDocumentCommand{\xtrirow}{ m m m }{
    \begin{minipage}[t]{.3\textwidth}
        #1
    \end{minipage}%
    \hfill%
    \begin{minipage}[t]{.3\textwidth}
        #2
    \end{minipage}%
    \hfill%
    \begin{minipage}[t]{.3\textwidth}
        #3
    \end{minipage}
}

\NewDocumentCommand{\xdicol}{ m m }{
    #1
    \vskip\baselineskip
    #2
}

\NewDocumentCommand{\xtricol}{ m m m }{
    #1
    \vskip\baselineskip
    #2
    \vskip\baselineskip
    #3
}

\NewDocumentCommand{\highlight}{O{red!60} m m}{%
\draw[line width=1bp, color=#1] (#2.north west)rectangle (#3.south east);
}

\NewDocumentCommand{\fhighlight}{O{red!60} m m}{%
\draw[draw=none, fill=#1] (#2.north west)rectangle (#3.south east);
}